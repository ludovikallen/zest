'use strict';var j=async(s,r)=>{let e=typeof r=="function"?await r(s):r;if(e)return s.scheme==="bearer"?`Bearer ${e}`:s.scheme==="basic"?`Basic ${btoa(e)}`:e},z=(s,r,e)=>{typeof e=="string"||e instanceof Blob?s.append(r,e):s.append(r,JSON.stringify(e));},I=(s,r,e)=>{typeof e=="string"?s.append(r,e):s.append(r,JSON.stringify(e));},k={bodySerializer:s=>{let r=new FormData;return Object.entries(s).forEach(([e,i])=>{i!=null&&(Array.isArray(i)?i.forEach(a=>z(r,e,a)):z(r,e,i));}),r}},R={bodySerializer:s=>JSON.stringify(s,(r,e)=>typeof e=="bigint"?e.toString():e)},$={bodySerializer:s=>{let r=new URLSearchParams;return Object.entries(s).forEach(([e,i])=>{i!=null&&(Array.isArray(i)?i.forEach(a=>I(r,e,a)):I(r,e,i));}),r.toString()}},U=s=>{switch(s){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},_=s=>{switch(s){case "form":return ",";case "pipeDelimited":return "|";case "spaceDelimited":return "%20";default:return ","}},D=s=>{switch(s){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},O=({allowReserved:s,explode:r,name:e,style:i,value:a})=>{if(!r){let t=(s?a:a.map(l=>encodeURIComponent(l))).join(_(i));switch(i){case "label":return `.${t}`;case "matrix":return `;${e}=${t}`;case "simple":return t;default:return `${e}=${t}`}}let o=U(i),n=a.map(t=>i==="label"||i==="simple"?s?t:encodeURIComponent(t):h({allowReserved:s,name:e,value:t})).join(o);return i==="label"||i==="matrix"?o+n:n},h=({allowReserved:s,name:r,value:e})=>{if(e==null)return "";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return `${r}=${s?e:encodeURIComponent(e)}`},S=({allowReserved:s,explode:r,name:e,style:i,value:a})=>{if(a instanceof Date)return `${e}=${a.toISOString()}`;if(i!=="deepObject"&&!r){let t=[];Object.entries(a).forEach(([f,p])=>{t=[...t,f,s?p:encodeURIComponent(p)];});let l=t.join(",");switch(i){case "form":return `${e}=${l}`;case "label":return `.${l}`;case "matrix":return `;${e}=${l}`;default:return l}}let o=D(i),n=Object.entries(a).map(([t,l])=>h({allowReserved:s,name:i==="deepObject"?`${e}[${t}]`:t,value:l})).join(o);return i==="label"||i==="matrix"?o+n:n};var H=/\{[^{}]+\}/g,B=({path:s,url:r})=>{let e=r,i=r.match(H);if(i)for(let a of i){let o=false,n=a.substring(1,a.length-1),t="simple";n.endsWith("*")&&(o=true,n=n.substring(0,n.length-1)),n.startsWith(".")?(n=n.substring(1),t="label"):n.startsWith(";")&&(n=n.substring(1),t="matrix");let l=s[n];if(l==null)continue;if(Array.isArray(l)){e=e.replace(a,O({explode:o,name:n,style:t,value:l}));continue}if(typeof l=="object"){e=e.replace(a,S({explode:o,name:n,style:t,value:l}));continue}if(t==="matrix"){e=e.replace(a,`;${h({name:n,value:l})}`);continue}let f=encodeURIComponent(t==="label"?`.${l}`:l);e=e.replace(a,f);}return e},A=({allowReserved:s,array:r,object:e}={})=>a=>{let o=[];if(a&&typeof a=="object")for(let n in a){let t=a[n];if(t!=null)if(Array.isArray(t)){let l=O({allowReserved:s,explode:true,name:n,style:"form",value:t,...r});l&&o.push(l);}else if(typeof t=="object"){let l=S({allowReserved:s,explode:true,name:n,style:"deepObject",value:t,...e});l&&o.push(l);}else {let l=h({allowReserved:s,name:n,value:t});l&&o.push(l);}}return o.join("&")},P=s=>{if(!s)return "stream";let r=s.split(";")[0]?.trim();if(r){if(r.startsWith("application/json")||r.endsWith("+json"))return "json";if(r==="multipart/form-data")return "formData";if(["application/","audio/","image/","video/"].some(e=>r.startsWith(e)))return "blob";if(r.startsWith("text/"))return "text"}},E=async({security:s,...r})=>{for(let e of s){let i=await j(e,r.auth);if(!i)continue;let a=e.name??"Authorization";switch(e.in){case "query":r.query||(r.query={}),r.query[a]=i;break;case "cookie":r.headers.append("Cookie",`${a}=${i}`);break;case "header":default:r.headers.set(a,i);break}return}},q=s=>W({baseUrl:s.baseUrl,path:s.path,query:s.query,querySerializer:typeof s.querySerializer=="function"?s.querySerializer:A(s.querySerializer),url:s.url}),W=({baseUrl:s,path:r,query:e,querySerializer:i,url:a})=>{let o=a.startsWith("/")?a:`/${a}`,n=(s??"")+o;r&&(n=B({path:r,url:n}));let t=e?i(e):"";return t.startsWith("?")&&(t=t.substring(1)),t&&(n+=`?${t}`),n},x=(s,r)=>{let e={...s,...r};return e.baseUrl?.endsWith("/")&&(e.baseUrl=e.baseUrl.substring(0,e.baseUrl.length-1)),e.headers=C(s.headers,r.headers),e},C=(...s)=>{let r=new Headers;for(let e of s){if(!e||typeof e!="object")continue;let i=e instanceof Headers?e.entries():Object.entries(e);for(let[a,o]of i)if(o===null)r.delete(a);else if(Array.isArray(o))for(let n of o)r.append(a,n);else o!==void 0&&r.set(a,typeof o=="object"?JSON.stringify(o):o);}return r},m=class{_fns;constructor(){this._fns=[];}clear(){this._fns=[];}getInterceptorIndex(r){return typeof r=="number"?this._fns[r]?r:-1:this._fns.indexOf(r)}exists(r){let e=this.getInterceptorIndex(r);return !!this._fns[e]}eject(r){let e=this.getInterceptorIndex(r);this._fns[e]&&(this._fns[e]=null);}update(r,e){let i=this.getInterceptorIndex(r);return this._fns[i]?(this._fns[i]=e,r):false}use(r){return this._fns=[...this._fns,r],this._fns.length-1}},v=()=>({error:new m,request:new m,response:new m}),N=A({allowReserved:false,array:{explode:true,style:"form"},object:{explode:true,style:"deepObject"}}),Q={"Content-Type":"application/json"},w=(s={})=>({...R,headers:Q,parseAs:"auto",querySerializer:N,...s});var J=(s={})=>{let r=x(w(),s),e=()=>({...r}),i=n=>(r=x(r,n),e()),a=v(),o=async n=>{let t={...r,...n,fetch:n.fetch??r.fetch??globalThis.fetch,headers:C(r.headers,n.headers)};t.security&&await E({...t,security:t.security}),t.body&&t.bodySerializer&&(t.body=t.bodySerializer(t.body)),(t.body===void 0||t.body==="")&&t.headers.delete("Content-Type");let l=q(t),f={redirect:"follow",...t},p=new Request(l,f);for(let u of a.request._fns)u&&(p=await u(p,t));let T=t.fetch,c=await T(p);for(let u of a.response._fns)u&&(c=await u(c,p,t));let g={request:p,response:c};if(c.ok){if(c.status===204||c.headers.get("Content-Length")==="0")return t.responseStyle==="data"?{}:{data:{},...g};let u=(t.parseAs==="auto"?P(c.headers.get("Content-Type")):t.parseAs)??"json";if(u==="stream")return t.responseStyle==="data"?c.body:{data:c.body,...g};let y=await c[u]();return u==="json"&&(t.responseValidator&&await t.responseValidator(y),t.responseTransformer&&(y=await t.responseTransformer(y))),t.responseStyle==="data"?y:{data:y,...g}}let b=await c.text();try{b=JSON.parse(b);}catch{}let d=b;for(let u of a.error._fns)u&&(d=await u(b,c,p,t));if(d=d||{},t.throwOnError)throw d;return t.responseStyle==="data"?void 0:{error:d,...g}};return {buildUrl:q,connect:n=>o({...n,method:"CONNECT"}),delete:n=>o({...n,method:"DELETE"}),get:n=>o({...n,method:"GET"}),getConfig:e,head:n=>o({...n,method:"HEAD"}),interceptors:a,options:n=>o({...n,method:"OPTIONS"}),patch:n=>o({...n,method:"PATCH"}),post:n=>o({...n,method:"POST"}),put:n=>o({...n,method:"PUT"}),request:o,setConfig:i,trace:n=>o({...n,method:"TRACE"})}};exports.createClient=J;exports.createConfig=w;exports.formDataBodySerializer=k;exports.jsonBodySerializer=R;exports.urlSearchParamsBodySerializer=$;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map