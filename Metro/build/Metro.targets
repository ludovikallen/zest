<Project>

    <UsingTask
            TaskName="MetroGenerator.TypeScriptClientGenerator"
            AssemblyFile="C:\Users\ludovik.allen\Documents\git\Metro\Metro\bin\Debug\net9.0\MetroGenerator.dll" />

    <UsingTask
            TaskName="MetroGenerator.OpenApiDocumentGenerator"
            AssemblyFile="C:\Users\ludovik.allen\Documents\git\Metro\Metro\bin\Debug\net9.0\MetroGenerator.dll" />

    <Target Name="generateOpenApi" AfterTargets="Build">
        <Message Text="Metro: Generating OpenApi document..." Importance="high" />
        <OpenApiDocumentGenerator BuildPath="C:\Users\ludovik.allen\Documents\git\Metro\Example" AssemblyName="Example"></OpenApiDocumentGenerator>
    </Target>

    <Target Name="forceOpenApiReGenerationOnRebuild" AfterTargets="CoreClean">
        <Message Text="Metro: Cleaning previously generated OpenApi document..." Importance="high" />
        <Delete Files="C:\Users\ludovik.allen\Documents\git\Metro\Example\generated\swagger.json"></Delete>
    </Target>

    <Target Name="generateTypeScriptClient" AfterTargets="generateOpenApi">
        <Message Text="Metro: Generating TypeScript client..." Importance="high" />
        <TypeScriptClientGenerator BuildPath="C:\Users\ludovik.allen\Documents\git\Metro\Example"></TypeScriptClientGenerator>
    </Target>

    <Target Name="forceReGenerationOnRebuild" AfterTargets="CoreClean">
        <Message Text="Metro: Cleaning previously generated TypeScript client..." Importance="high" />
        <Delete Files="C:\Users\ludovik.allen\Documents\git\Metro\Example\frontend\src\generated\generated.ts"></Delete>
    </Target>

</Project>